

/********* Examples **********/
GET    /api/users          # List all users
GET    /api/users/:id      # Get specific user
POST   /api/users          # Create new user
PUT    /api/users/:id      # Update entire user
PATCH  /api/users/:id      # Partial user update
DELETE /api/users/:id      # Delete user






GET /tasks/admin/getallemployees              #List all the employees of the company

GET /tasks/admin/getEmployeeDeartmentWise     #List all the employees of the company per department 

GET /tasks/admin/getalltasks                  #List all the tasks of all employees of the company

GET /tasks/admin/gettaskbydepartment          #List all the tasks department wise

GET /tasks/admin/?status=
assigned&department=
Marketing&assignee=5&sort=
deadline&order=asc&page=1&limit=10            # List all tasks with multiple filtering and sorting options available

GET /tasks/admin/getalldepartments            # List all departments

GET /tasks/admin/stats                        # List all stats

GET /tasks/admin/getallcomplaints             # List all complaints done by all employees

GET /tasks/admin/getallleaverequests          # List all the leave requests done by all the employees

POST /tasks/admin/createtask                  # Create a partiuclar task 

PATCH /tasks/admin/updatestatus               # Update the status

DELETE /tasks/admin/deletetask/:id            # Delete a particular task

POST /tasks/admin/postnotices                 # Post a notice

POST /tasks/admin/postwarningletter           # Post a warning letter

POST /tasks/admin/postterminationletter       # Post a termination letter

POST /tasks/admin/createallsuspenseletters    # Create suspense letter for an employee

GET /tasks/admin/getallterminationletter      # List all termination letter

GET /tasks/admin/getallwarningletters         # List all warning letters

GET /tasks/admin/getallsuspensionletter       # List all the suspension letters













/*/**************************************************** New  structure ****************************************/
// EMPLOYEES
GET /api/admin/employees                      # All employees (with ?department= filter)   --complete
GET /api/admin/employees/:id                  # Specific employee                          --complete
POST /api/admin/employees                     # Create employee                            --complete
PUT /api/admin/employees/:id                  # Update employee                            --complete
DELETE /api/admin/employees/:id               # Delete employee

// TASKS  
GET /api/admin/tasks                          # All tasks (with all your filters)        --complete
GET /api/admin/tasks/:id                      # Specific task                            --complete
POST /api/admin/tasks                         # Create task                              --complete
PUT /api/admin/tasks/:id                      # Update task                              --complete
PATCH /api/admin/tasks/:id/status             # Update status only                       --complete
DELETE /api/admin/tasks/:id                   # Delete task                              --complete

// DEPARTMENTS
GET /api/admin/departments                    # All departments                          --complete
POST /api/admin/departments                   # Create department                        --complete
PUT /api/admin/departments/:id                # Update department                        --complete
DELETE /api/admin/departments/:id             # Delete department                        --complete

// COMPLAINTS
GET /api/admin/complaints                     # All complaints (with filters)            --complete
GET /api/admin/complaints/:id                 # Specific complaint                       --complete
PATCH /api/admin/complaints/:id/status        # Update complaint status                  --complete

// LEAVE REQUESTS --complete
GET /api/admin/leave-requests                 # All leave requests                       --complete
GET /api/admin/leave-requests/:id             # Specific leave request                   --complete
PATCH /api/admin/leave-requests/:id/status    # Update status                            --complete

// NOTICES --complete
GET /api/admin/notices                        # All notices                              --complete
POST /api/admin/notices                       # Create notice                            --complete
PUT /api/admin/notices/:id                    # Update notice                            --complete
DELETE /api/admin/notices                     # Delete all notices                       --complete
DELETE /api/admin/notices/:id                 # Delete notice                            --complete

// STATISTICS & REPORTING
GET /api/admin/dashboard/stats                # Dashboard statistics
GET /api/admin/reports/tasks                  # Task reports
GET /api/admin/reports/attendance             # Attendance reports
GET /api/admin/reports/performance            # Performance reports

//HR
GET    /api/hr                                # All HR records (with filters) --complete
GET    /api/hr/:id                            # Specific HR record --complete
POST   /api/hr                                # Create HR record --complete
PATCH  /api/hr/:id                            # Update HR record --complete
DELETE /api/hr/:id                            # Delete HR record --complete



//IT SUPPORT
GET    /api/support/tickets                   # All IT support tickets --complete
GET    /api/support/tickets/:id               # Specific ticket --complete
POST   /api/support/tickets                   # Create new ticket --complete
PATCH  /api/support/tickets/:id               # Update ticket (status/details) --complete
DELETE /api/support/tickets/:id               # Delete/close ticket --complete


#FOR EMPLOYEE DASHBOARD:

üë§ Employee Profile
GET /api/employees/me ‚Üí View own profile details. --Complete

PUT /api/employees/me ‚Üí Update personal info (phone, address, emergency contact). --Complete

GET /api/employees/me/attendance ‚Üí View own attendance records.

üìã Tasks
GET /api/employees/me/tasks ‚Üí View tasks assigned to the employee. -- REDUNDANT

GET /api/employees/me/tasks/:id ‚Üí View details of a specific task. -- REDUNDANT

PATCH /api/employees/me/tasks/:id/status ‚Üí Update task status (e.g., ‚Äúin-progress‚Äù, ‚Äúcompleted‚Äù). -- REDUNDANT

üè¢ Departments & Notices
GET /api/employees/departments ‚Üí View department list (for reference). ---Complete

GET /api/employees/notices ‚Üí View all company notices. ---Complete

GET /api/employees/notices/:id ‚Üí View a specific notice. --Complete

üìë Leave Requests
GET /api/employees/me/leave-requests ‚Üí View own leave requests. --Complete

GET /api/employees/me/leave-requests/:id ‚Üí View status of a specific leave request. --Complete

POST /api/employees/me/leave-requests ‚Üí Submit a new leave request. --Complete


üõ†Ô∏è Complaints
GET /api/employees/me/complaints ‚Üí View complaints submitted by the employee. --Complete

POST /api/employees/me/complaints ‚Üí Submit a new complaint. --Complete

GET /api/employees/me/complaints/:complainId/:empid ‚Üí View status of a specific complaint. -- Complete

üìä Dashboard (Employee-Specific)
GET /api/employees/me/dashboard ‚Üí Personalized dashboard stats (tasks pending, leave balance, notices).


/***************************************************************************************************************/

/****************************** Project Understanding Prompt *******************/



Project Overview
I am building a Task Manager and HR Management System using the PERN stack (PostgreSQL, Express.js, React, Node.js). 
The backend is being developed with Node.js, Express, and Prisma ORM for PostgreSQL.

Key Features
User Management: CRUD operations for users (employees), authentication, and role-based access.
Task Management: Employees can create, update, view, and delete their own tasks. Admins can manage all tasks, assign tasks, filter, sort, and view tasks department-wise.
Department Management: CRUD operations for departments, assign managers, and associate users with departments.
Complaints & Leave Requests: Employees can submit complaints and leave requests. Admins can view and update statuses.
Notices: Admins can post, update, and delete notices for employees.
Payroll & Salary Structure: Models for salary structures, payroll records, and components, supporting earnings, deductions, and payment status tracking.
Statistics & Reporting: Endpoints for dashboard statistics, task reports, attendance, and performance.
Tech Stack
Backend: Node.js, Express.js
Database: PostgreSQL
ORM: Prisma
Authentication: JWT (assumed from context)
API Design: RESTful, with clear separation for admin and employee endpoints
Database Schema (Prisma)
users: Employees with roles, department association, and authentication fields.
tasks: Tasks assigned to users, with status, deadlines, and relations.
department: Departments with managers and employees.
complaints, leave_requests, notice, reg_letters: HR-related models for complaints, leave, notices, resignation letters.
profile: Extended user profile with education, skills, contact info.
salary_structures, salary_components, payroll_records, payroll_components: Payroll and salary breakdown.
Enums: For task status, component type (earning/deduction), payment status, and payment method.
API Endpoints
Users (Employees)
GET /api/users ‚Äî List all users
GET /api/users/:id ‚Äî Get specific user
POST /api/users ‚Äî Create new user
PUT /api/users/:id ‚Äî Update user
PATCH /api/users/:id ‚Äî Partial update
DELETE /api/users/:id ‚Äî Delete user
Admin Endpoints
Employees: CRUD, filter by department
Tasks: CRUD, filter/sort by status, department, assignee, deadline, etc.
Departments: CRUD
Complaints: View all, update status
Leave Requests: View all, update status
Notices: CRUD, delete all or by ID
Statistics & Reports: Dashboard stats, task/attendance/performance reports
Example Complex Endpoints
GET /api/admin/tasks?status=assigned&department=Marketing&assignee=5&sort=deadline&order=asc&page=1&limit=10 ‚Äî List tasks with multiple filters and sorting.
PATCH /api/admin/tasks/:id/status ‚Äî Update only the status of a task.
Middleware & Validation
Authentication middleware attaches req.user to requests.
Input validation for required fields and enums.
Error handling for Prisma errors (unique constraint, foreign key, etc.).
Current Issues
Prisma relation errors (e.g., missing opposite relation fields).
Prisma client generation (npx prisma generate required after schema changes).
Model naming conventions (Prisma models are singular, table names can be plural).
Goal:
To build a robust, scalable HR and Task Management backend with clear RESTful APIs, proper data modeling, and admin/employee separation, supporting all typical HR operations for a company.

Instructions for AI Tool:

Use the provided schema and endpoint planning as the source of truth.
Suggest improvements, generate code, or help debug based on this structure.
Ensure all Prisma models and relations are correct and compatible.
Follow best practices for REST API design, error handling, and validation.
If you need more details (e.g., specific model fields, sample requests/responses, or authentication flow), please ask!

GPT-4.1 ‚Ä¢ 1x



/******************************************** new description **********************************************************/

Below is a clear, step-by-step project description of your PERN Task Manager & HR Management System, written the way it would appear in a real project README / proposal.
I‚Äôve structured it so it‚Äôs easy to understand, scalable, and technically correct.

üìå Project Description
Task Manager & HR Management System (PERN Stack)

This project is a full-featured Task Management and Human Resource Management System built using the PERN stack (PostgreSQL,
 Express.js, React, Node.js) with Prisma ORM for database modeling and access.

The system is designed to help organizations manage employees, tasks, departments, payroll, and HR operations efficiently, 
with clear separation between admin and employee responsibilities.

üèóÔ∏è Architecture Overview
Backend

Node.js + Express.js ‚Üí REST API

PostgreSQL ‚Üí Relational database

Prisma ORM ‚Üí Type-safe database access

JWT Authentication ‚Üí Secure access control

Role-Based Authorization ‚Üí Admin vs Employee

Frontend (planned)

React.js ‚Üí User interface

REST APIs ‚Üí Backend communication

üë• User Roles
1. Admin

Full control over users, departments, tasks, payroll, and HR operations

Access to dashboards, statistics, and reports

2. Employee

Manage own tasks

Submit complaints and leave requests

View notices, payroll, and profile details

üîê Authentication & Authorization
Authentication

JWT-based login system

Secure password storage

Token-based request authentication

Authorization

Middleware checks user role

Separate routes for:

/api/admin/*

/api/employee/*

üì¶ Core Features (Step-by-Step)
1Ô∏è‚É£ User (Employee) Management
Purpose

Manage employee accounts and access.

Features

Create, update, delete employees

Assign roles (Admin / Employee)

Assign employees to departments

Enable / disable accounts

View employee profiles

API Examples
GET    /api/users
GET    /api/users/:id
POST   /api/users
PUT    /api/users/:id
DELETE /api/users/:id

2Ô∏è‚É£ Profile Management
Purpose

Store extended employee information.

Features

Personal details (address, phone, DOB)

Education & skills

Emergency contact information

Profile updates by employee

Relations

One-to-one with users

3Ô∏è‚É£ Department Management
Purpose

Organize employees into departments.

Features

Create, update, delete departments

Assign department managers

Associate users with departments

Filter employees by department

Admin APIs
POST   /api/admin/departments
GET    /api/admin/departments
PUT    /api/admin/departments/:id
DELETE /api/admin/departments/:id

4Ô∏è‚É£ Task Management System
Purpose

Track and manage employee tasks.

Employee Features

Create tasks

View own tasks

Update task progress

Delete own tasks

Admin Features

Assign tasks to employees

View all tasks

Filter by:

Status

Department

Assignee

Deadline

Sort & paginate tasks

Example API
GET /api/admin/tasks?status=assigned&department=Marketing&sort=deadline&order=asc&page=1&limit=10

5Ô∏è‚É£ Complaints Management
Purpose

Allow employees to raise internal issues.

Employee

Submit complaints

View own complaints

Admin

View all complaints

Update complaint status (open / in_review / resolved)

6Ô∏è‚É£ Leave Request Management
Purpose

Handle employee leave workflows.

Employee

Apply for leave

Track leave status

Admin

Approve / reject leave requests

View leave history

7Ô∏è‚É£ Notices & Announcements
Purpose

Internal communication within the organization.

Admin

Create notices

Update notices

Delete notices

Publish company announcements

Employee

View active notices

8Ô∏è‚É£ Payroll & Salary Management
Purpose

Manage employee compensation.

Features

Salary structures

Salary components (earnings & deductions)

Payroll records per employee

Payment status & method tracking

Supported Enums

Component type (EARNING / DEDUCTION)

Payment status (PAID / UNPAID)

Payment method (BANK / CASH)

9Ô∏è‚É£ Reports & Analytics
Purpose

Provide insights to admins.

Features

Dashboard statistics

Task completion reports

Attendance & performance reports

Department-wise summaries

10Ô∏è‚É£ Validation & Error Handling
Input Validation

Required fields

Enum validation

ID format validation

Error Handling

Prisma errors (unique constraint, FK constraint)

Centralized error middleware

Meaningful API responses

üß© Database Design (Prisma ORM)
Key Models

User

Profile

Department

Task

Complaint

LeaveRequest

Notice

SalaryStructure

SalaryComponent

PayrollRecord

PayrollComponent

Design Principles

Singular Prisma model names

Explicit relations with @relation

Enums for status and type fields

Indexing for performance

üéØ Project Goals

Build a scalable HR & Task Management backend

Follow industry-standard REST API design

Use Prisma best practices for relations and migrations

Maintain clean separation between admin and employee responsibilities

Ensure security, validation, and performance

üöÄ Future Enhancements

Role-based dashboards (React)

File uploads (documents, resumes)

Email notifications

Audit logs

Multi-organization support

If you want, next I can:

‚úÖ Design the complete Prisma schema

‚úÖ Generate API folder structure

‚úÖ Write auth middleware

‚úÖ Create Admin vs Employee route separation

‚úÖ Generate ER diagram

‚úÖ Prepare README.md